@model XCommsWeb.Models.ContactSupport
@using XCommsWeb.Models;

@{
    ViewBag.Title = "Contact";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style type="text/css">
    .hasbgcolor {
        color: red;
    }

    .TxtVerticalAlign {
        vertical-align: middle !important;
    }

    .MainBox {
        box-shadow: rgba(14, 30, 37, 0.12) 0px 2px 4px 0px, rgba(14, 30, 37, 0.32) 0px 2px 16px 0px !important;
    }
</style>

<section id="widget-grid">
    <div class="row">
        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false" data-widget-fullscreenbutton="false">
                <header>
                    <span class="widget-icon"> <i class="fa fa-phone-square"></i> </span>
                    <h2>Contact</h2>
                </header>
                <div class="widget-body MainBox">

                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <!-- well -->
                            <div class="">
                                <div id="myCarousel-2" class="carousel fade">
                                    <ol class="carousel-indicators" style="display:none">
                                        <li data-target="#myCarousel-2" data-slide-to="0" class=""></li>
                                        <li data-target="#myCarousel-2" data-slide-to="1" class=""></li>
                                        <li data-target="#myCarousel-2" data-slide-to="2" class=""></li>
                                        <li data-target="#myCarousel-2" data-slide-to="3" class=""></li>
                                        <li data-target="#myCarousel-2" data-slide-to="4" class=""></li>
                                        <li data-target="#myCarousel-2" data-slide-to="5" class="active"></li>
                                    </ol>
                                    <div class="carousel-inner">
                                        <!-- Slide 1 -->
                                        <div class="item">
                                            <img src="~/assets/img/ClientInstaller/Banner3c.png" alt="Client Installer Banner1" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                        <!-- Slide 2 -->
                                        <div class="item">
                                            <img src="~/assets/img/ClientInstaller/Banner2c.png" alt="Client Installer Banner2" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                        <!-- Slide 3 -->
                                        <div class="item">
                                            <img src="~/assets/img/ClientInstaller/Banner1c.png" alt="Client Installer Banner3" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                        <!-- Slide 4 -->
                                        <div class="item">
                                            <img src="~/assets/img/ClientInstaller/Banner3c.png" alt="Client Installer Banner4" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                        <!-- Slide 5 -->
                                        <div class="item">
                                            <img src="~/assets/img/ClientInstaller/Banner2c.png" alt="Client Installer Banner5" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                        <!-- Slide 6 -->
                                        <div class="item active">
                                            <img src="~/assets/img/ClientInstaller/Banner1c.png" alt="Client Installer Banner5" class="img-responsive" width="100%" height="100%" />
                                        </div>
                                    </div>
                                    <a class="left carousel-control" href="#myCarousel-2" data-slide="prev" style="display:none"> <span class="glyphicon glyphicon-chevron-left"></span> </a>
                                    <a class="right carousel-control" href="#myCarousel-2" data-slide="next" style="display:none"> <span class="glyphicon glyphicon-chevron-right"></span> </a>
                                </div>
                            </div>
                            <!-- end well-->
                        </div>
                        @*<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <img src="~/assets/img/Screen/Support/BannerSupport.png" class="img-responsive" style="height: inherit; width: inherit; " />
                        </div>*@
                        <div class="col-xs-12 col-sm-12 col-md-12">
                            <div style="text-align: center; font-size: 18px; color: #ffffff; background-color: #404040; padding: 5px; margin-bottom: 20px; margin-top: 0px; ">
                                <p style="font-size: 40px;"><strong> We’d Love To Hear From You </strong></p> Whether you have a question about features, functions, pricing, billing, need a tutorial, or anything else, our team is ready to answer all of your questions.
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="col-md-2 col-lg-2"></div>
                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
                            <article class="">
                                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-1" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false" data-widget-fullscreenbutton="false">
                                    <header role="heading">
                                        @*<div class="jarviswidget-ctrls" role="menu"></div>*@
                                        <h2 style="width:auto !important;"> <i class="fa fa-question-circle"></i> What Can We Help You With Today ?</h2>
                                    </header>
                                    <div>
                                        <div class="widget-body no-padding">
                                            @using (Html.BeginForm("SubmitContactDetail", "Master", FormMethod.Post, new { id = "formContactSupport", @class = "", enctype = "multipart/form-data" }))
                                            {
                                                <div class="smart-form">

                                                    <div class="row">
                                                        <div class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                            @Html.HiddenFor(Model => Model.RequestType)
                                                            <section class="col col-xs-12 col-sm-12 col-md-3 col-lg-3">
                                                                <label class="checkbox">
                                                                    @Html.CheckBoxFor(Model => Model.TechSupport, new { @class = "ClcChkSupportOpt", @value = "TechSupport" })
                                                                    <i></i> Support
                                                                </label>
                                                            </section>
                                                            <section class="col col-xs-12 col-sm-12 col-md-2 col-lg-2">
                                                                <label class="checkbox">
                                                                    @Html.CheckBoxFor(Model => Model.Renewal, new { @class = "ClcChkSupportOpt", @value = "Renewal" })
                                                                    <i></i> Renewal
                                                                </label>
                                                            </section>
                                                            <section class="col col-xs-12 col-sm-12 col-md-2 col-lg-2">
                                                                <label class="checkbox">
                                                                    @Html.CheckBoxFor(Model => Model.Trial, new { @class = "ClcChkSupportOpt", @value = "Trial" })
                                                                    <i></i> Trial
                                                                </label>
                                                            </section>
                                                            <section class="col col-xs-12 col-sm-12 col-md-2 col-lg-2">
                                                                <label class="checkbox">
                                                                    @Html.CheckBoxFor(Model => Model.Billing, new { @class = "ClcChkSupportOpt", @value = "Billing" })
                                                                    <i></i> Billing
                                                                </label>
                                                            </section>
                                                            <section class="col col-xs-12 col-sm-12 col-md-2 col-lg-2">
                                                                <label class="checkbox">
                                                                    @Html.CheckBoxFor(Model => Model.Other, new { @class = "ClcChkSupportOpt", @value = "Other" })
                                                                    <i></i> Other
                                                                </label>
                                                            </section>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                                            <label class="label"><strong>First Name</strong> <span class="hasbgcolor">*</span> : </label>
                                                            <label class="input">
                                                                <i class="icon-append fa fa-user txt-color-blue"></i>
                                                                @Html.TextBoxFor(Model => Model.FirstName, new { @class = "form-control required", @placeholder = "First Name", autocomplete = "off" })
                                                                <b class="tooltip tooltip-top-right">
                                                                    <i class="fa fa-warning txt-color-teal"></i>
                                                                    Enter First Name
                                                                </b>
                                                            </label>
                                                        </section>
                                                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                                            <label class="label"><strong>Last Name</strong> <span class="hasbgcolor">*</span> : </label>
                                                            <label class="input">
                                                                <i class="icon-append fa fa-user txt-color-blue"></i>
                                                                @Html.TextBoxFor(Model => Model.LastName, new { @class = "form-control required", @placeholder = "Last Name", autocomplete = "off" })
                                                                <b class="tooltip tooltip-top-right">
                                                                    <i class="fa fa-warning txt-color-teal"></i>
                                                                    Enter Last Name
                                                                </b>
                                                            </label>
                                                        </section>
                                                    </div>

                                                    <div class="row">
                                                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                                            <label class="label"><strong>Company Email</strong> <span class="hasbgcolor">*</span> : </label>
                                                            <label class="input">
                                                                <i class="icon-append fa fa-envelope txt-color-blue"></i>
                                                                @Html.TextBoxFor(Model => Model.CompanyEmail, new { @class = "form-control required", @email = true, @placeholder = "Company Email", autocomplete = "off" })
                                                                <b class="tooltip tooltip-top-right">
                                                                    <i class="fa fa-warning txt-color-teal"></i>
                                                                    Enter Company Email
                                                                </b>
                                                            </label>
                                                        </section>
                                                        <section class="col col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                                            <label class="label"><strong>Company Name</strong> <span class="hasbgcolor">*</span> : </label>
                                                            <label class="input">
                                                                <i class="icon-append fa fa-bank txt-color-blue"></i>
                                                                @Html.TextBoxFor(Model => Model.CompanyName, new { @class = "form-control required", @placeholder = "Company Name", autocomplete = "off" })
                                                                <b class="tooltip tooltip-top-right">
                                                                    <i class="fa fa-warning txt-color-teal"></i>
                                                                    Enter Company Name
                                                                </b>
                                                            </label>
                                                        </section>
                                                    </div>

                                                    <div class="row">
                                                        <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                            <label class="label"><strong>Tell us more</strong> : </label>
                                                            <label class="textarea">
                                                                <i class="icon-append fa fa-bookmark txt-color-blue"></i>
                                                                @Html.TextAreaFor(Model => Model.Remark, new { @class = "form-control", @placeholder = "Tell us more", autocomplete = "off", @rows = 4 })
                                                                <b class="tooltip tooltip-top-right">
                                                                    <i class="fa fa-warning txt-color-teal"></i>
                                                                    Enter More Detail
                                                                </b>
                                                            </label>
                                                        </section>
                                                    </div>

                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="form-actions">
                                                    <div class="col-md-12">
                                                        <div class="pull-right">
                                                            <ul class="demo-btns">
                                                                <li>
                                                                    <a href="javascript:void(0);" id="btnSubmitRequest" class="btn btn-labeled btn-primary" rel="tooltip" title="" data-placement="bottom" data-original-title="Submit Data">
                                                                        <span class="btn-label"><i class="fa fa-check-circle"></i></span>Submit
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </article>
                        </div>
                        <div class="col-md-2 col-lg-2"></div>
                    </div>

                </div>
            </div>
        </article>
    </div>
</section>

<script type="text/javascript">
    var FormComponents = function (DomainName) {

        var FormValidate = function (DomainName) {
            $("#formContactSupport").validate({
                rules: {},
                messages: {},
                errorPlacement: function (error, element) {
                    error.insertAfter(element.parent());
                }
            });
        }

        var Event = function (DomainName) {

            $('#btnSubmitRequest').click(function () {
                App.blockUI({ boxed: true });

                var SelectCount = 0;
                $(".ClcChkSupportOpt").each(function () {
                    if (this.checked) {
                        SelectCount = SelectCount + 1;
                    }
                });
                if (SelectCount == 0) {
                    Swal.fire({
                        title: "Please select at least one request type!",
                        text: "",
                        icon: "error",
                        confirmButtonText:
                            '<i class="fa fa-thumbs-up"></i> Okay !',
                        showCancelButton: false,
                        cancelButtonColor: '#d33'
                    });
                    $(".ClcChkSupportOpt").parents("label").removeClass("state-success").change();
                    $(".ClcChkSupportOpt").parents("label").addClass("state-error").change();
                    App.unblockUI();
                    return false;
                }
                else {
                    $(".ClcChkSupportOpt").parents("label").removeClass("state-error").change();
                    $(".ClcChkSupportOpt").parents("label").addClass("state-success").change();

                    var form = $("#formContactSupport");
                    if (form.valid() == false) {
                        App.unblockUI();
                        return false;
                    }
                    else {
                        App.blockUI({ boxed: true });

                        var strUrl = DomainName + "/Home/GetData";
                        var parameters = {};
                        parameters['CustomerID'] = '@ViewBag.CustomerID';
                        $.ajax({
                            async: false,
                            type: 'POST',
                            url: strUrl,
                            dataType: 'json',
                            data: {
                                Method: 'USP_GetExistSMTPCountByCustomer',
                                parameters: parameters
                            },
                            success: function (data) {
                                var ExistCount = data[0]["CNT"];
                                console.log("ExistCount : " + ExistCount);
                                if (ExistCount == 0) {
                                    Swal.fire({
                                        title: '<i class="fa fa-envelope txt-color-green"></i> SMTP Mail Not Config, <br> Please set first Mail SMTP !',
                                        text: "Can you config Mail SMTP ?",
                                        icon: 'error',
                                        showCancelButton: true,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Yes, Config It !'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            window.location = DomainName + "/Master/SmtpConfiguration";
                                            App.unblockUI();
                                            return false;
                                        }
                                    })
                                    App.unblockUI();
                                }
                                else {
                                    App.blockUI({ boxed: true });
                                    $('#btnSubmitRequest').addClass('disabled');

                                    var StrUrl = DomainName + "/Master/SubmitContactDetail";
                                    $.ajax({
                                        url: StrUrl,
                                        cache: false,
                                        type: 'POST',
                                        data: $('#formContactSupport').serialize(),
                                        success: function (data) {
                                            if (data == 1) {

                                                Swal.fire({
                                                    title: "Your Request Has Been Sent Successfully.",
                                                    text: "",
                                                    icon: "success",
                                                    confirmButtonText: '<i class="fa fa-check-circle"></i> Okay ',
                                                    confirmButtonClass: "btn btn-success clsConfirmYes",
                                                    confirmButtonColor: '#7367f0'
                                                });

                                                $(".clsConfirmYes").on("click", function () {
                                                    App.blockUI();
                                                    window.location = DomainName + "/Master/Contact";
                                                });

                                                $(".clsConfirmNo").on("click", function () {
                                                    App.unblockUI();
                                                });

                                                App.unblockUI();
                                            }
                                            else {
                                                Swal.fire('Oops !', 'There is some issue please try again or Contact your administrator for more detail.', 'error');
                                                App.unblockUI();
                                            }
                                        },
                                        error: function (jqXHR, exception) {
                                            Swal.fire('Oops !', 'There is some issue please try again or Contact your administrator for more detail.', 'error');
                                            App.unblockUI();
                                        }
                                    });
                                }
                                App.unblockUI();
                            },
                            error: function (jqXHR, exception) {
                                TosterNotification("error", errorResult(jqXHR, exception), "Error");
                                App.unblockUI();
                            }
                        });
                    }
                }
            });

            $("input[class='ClcChkSupportOpt']").change(function () {
                var valuesArray = $('input[class="ClcChkSupportOpt"]:checked').map(function () {
                    return this.value;
                }).get().join(", ");
                $("#RequestType").val(valuesArray);
                /*console.log("selected : " + $("#RequestType").val());*/
            });

        }

        return {
            //main function to initiate the module
            init: function (DomainName) {
                FormValidate(DomainName);
                Event(DomainName);

                $('.carousel.slide').carousel({
                    interval: 5000,
                    cycle: true
                });
                $('.carousel.fade').carousel({
                    interval: 5000,
                    cycle: true
                });
            }
        }
    }();
</script>
